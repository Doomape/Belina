
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Belina</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
        <script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
    	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <link rel="stylesheet" href="@Url.Content("~/Content/Site.css")" type="text/css" />
@*    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")*@
</head>
<body>
    <div id="header">
        <div id="header_top">
            <div id="logo">
                <img src="/Content/sliki/belinaLogo5.png" />
            </div>
            <div id="products_menu">
                <ul class="classesName">
                </ul>
            </div>
            <div id="products_submenu">
                <h2></h2>
                <h3></h3>
                <ul>
                </ul>
            </div>
        </div>
    </div>
    <div id="main_content">
        @RenderBody()
    </div>
    <div id="footer"></div>

    <script type="text/javascript">

        var companyList = new Array();
        $(document).ready(function () {
            var n;
            var dinamycLeft = 347;
            var x;
            $.ajax({
                url: "/Home/getClasses",
                type: "GET",
                data: {},
                success: function (result) {
                    for (n = 0; n < result.length; n++) {
                        $('.classesName').append('<li><a href="#" id="manuLink" onmouseover="showFirm( \'' + result[n].class_name + '\',' + n + ')" onmouseout="emptyFirm(' + n + ')" class="classesLink" >' + result[n].class_name + '</a>'
                            + '<div id="show_dropdown_div" class="item_' + n + '" onmouseout="emptyFirm(' + n + ')"></div></li>');
                    }
                }
            });
            //==========================slide products script======================


            $("#prebaraj").animate({ right: "-270px" }, 0);
            //==================end slide products script================
        });
        function showFirm(className, classId) {
            var companyName;
            $.ajax({
                url: "/Home/getCompanies",
                type: "GET",
                data: { productName: className },
                success: function (result) {
                    for (x = 0; x < result.length; x++) {
                        companyName = result[x];
                        $('.item_' + classId).append('<a href="#" class="companyName" class="companyName" onclick="showSubmenu(\'' + className + '\',\'' + companyName + '\')">' + companyName + '</a>');
                    }
                }
            });
        }
        function emptyFirm(classId) {
            if ($('.item_' + classId).is(":hover") == false) {
                $('.item_' + classId).empty();
            }
        }

        function showSubmenu(className, companyName) {
            $('#main_content').empty();
            $('#products_submenu ul').empty();
            $('#products_submenu h2').empty();
            $('#products_submenu h2').append(companyName);
            $('#products_submenu h3').empty();
            $('#products_submenu h3').append(className);
            var typeName;
            $.ajax({
                url: "/Home/getTypes",
                type: "GET",
                data: { className: className, companyName: companyName },
                success: function (result) {
                    for (x = 0; x < result.length; x++) {
                        typeName = result[x];

                        $('#products_submenu ul').append('<li><a href="#" onclick="showProducts(\'' + className + '\',\'' + companyName + '\',\'' + typeName + '\')">' + typeName + '</a></li>');
                    }
                }
            });
        }

        function showProducts(className, companyName, typeName) {
            $('#main_content').empty();
            var product = '<div id="products">';
            var products_scroll_left = '<div id="products_scroll_left">';
            var scroll_left = '<div id="scroll_left"><img  src="/Content/sliki/green-arrow-left-2.png"></img></div>';
            var products_scroll_right = ' <div id="products_scroll_right">';
            var scroll_right = '  <div id="scroll_right"><img src="/Content/sliki/green-arrow-right-2.png"></img></div>'
            var closeDiv = '</div>';
            var products_window = '<div id="products_window">';
            var products_selection = '<div id="products_selection">';

            var left = products_scroll_left + scroll_left + closeDiv;
            var right = products_scroll_right + scroll_right + closeDiv;

            $('#main_content').append(product + left + products_window + products_selection + closeDiv + closeDiv + right + closeDiv);

            $.ajax({
                url: "/Home/getProducts",
                type: "GET",
                data: { className: className, companyName: companyName, typeName: typeName },
                success: function (result) {
                    var count_next_container = -1;
                    for (x = 0; x < result.length; x++) {
                        debugger;
                        if (x == 0 || ((x / 10) % 1 != 0) == false) {

                            count_next_container++;
                            $('#products_selection').append('<div class="products_frame"><div class="frame_title">'
                            + '<h3>' + typeName + '</h3>'
                            + '</div><div id="prod_container_' + count_next_container + '" class="products_group">'
                            + '<div class="product"><div class="product_image">'
                            + '<img src="/Content/sliki/kraft/vnatresni/Superior.jpg"></img></div>'
                            + '<div class="product_title">' + result[x] + '</div>'
                            + '<div class="product_description"></div>'
                            + '</div>'
                            + '</div>');
                        }
                        else {
                            var count = count_next_container.toString();
                            $('#prod_container_' + count).append('<div class="product"><div class="product_image">'
                            + '<img src="/Content/sliki/kraft/vnatresni/Superior.jpg"></img></div>'
                            + '<div class="product_title">' + result[x] + '</div>'
                            + '<div class="product_description"></div>');
                        }
                    }
                    setScrolling();
                }
            });
        }

        //function proba() {
        //    alert(1);
        //    if (frame_index < frame_length) {
        //        alert(1);
        //        position = "-=770px";
        //        $('#products_selection').animate(
        //            { left: position },
        //            800,
        //            'easeInOutQuint'
        //        );
        //        frame_index++;
        //    }
        //}

        function setScrolling() {
            var hidden = true;

            var frame_index = 1;
            var frame_length = $(".products_frame").length;

            $("#tab_icon").click(function () {
                if (hidden) {
                    $("#prebaraj").animate({ right: "0px" }, 600, 'easeInBack');
                    hidden = false;
                }
                else {
                    $("#prebaraj").animate({ right: "-270px" }, 600, 'easeOutBounce');
                    hidden = true;
                }
            });

            $("#scroll_left").click(function () {

                if (frame_index > 1) {
                    position = "+=770px";
                    $('#products_selection').animate(
                        { left: position },
                        1200,
                        'easeInOutQuint'
                    );
                    frame_index--;
                }
            });

            $("#scroll_right").click(function () {
                debugger;
                if (frame_index < frame_length) {
                    position = "-=770px";
                    $('#products_selection').animate(
                        { left: position },
                        800,
                        'easeInOutQuint'
                    );
                    frame_index++;
                }
            });

            $(".product").mouseenter(function () {
                var styles =
                {
                    zIndex: "25",
                    backgroundColor: "#fefdfc",
                    color: "#506e80",
                    opacity: "0.9",
                    boxShadow: "0px 0px 20px 5px #c7c7c7"
                };
                $(this).css(styles);
            });

            $(".product").mouseleave(function () {
                var styles =
                {
                    zIndex: "20",
                    backgroundColor: "#ffffff",
                    borderColor: "#d7d7d7",
                    color: "#809eb0",
                    opacity: "1",
                    boxShadow: "0px 0px 0px 0px #979797"
                };
                $(this).css(styles);
            });

            $(".product").click(function () {
                $('#layer_3').show();
                var styles =
                {
                    width: "2px",
                    height: "2px",
                    top: "320px"
                };
                $('#product_details').css(styles);
                var content_styles =
                {
                    display: "none",
                    opacity: "0"
                };
                $('#product_details_content').css(content_styles);
                $('#product_details_close').css('display', 'none');

                var title = $(this).find('.product_title').text();
                $('#details_title h4').text(title);
                var description = $(this).find('.product_description').text();
                $('#details_subtitle').text(description);
                var image = $(this).find('.product_image').html() + "</img>";
                $('#details_image').html(image);

                $('#layer_4').show(800, function () {
                    $('#product_details').animate(
                        {
                            width: "900px",
                            height: "622px",
                            top: "0px"
                        },
                        600,
                        "linear",
                        function () {
                            $('#product_details_content').css('display', 'block');
                            $('#product_details_content').animate(
                                {
                                    opacity: "1"
                                },
                                1000,
                                function () {
                                    $('#product_details_close').css('display', 'block');
                                }
                            );
                        }
                    );
                });
            });

            $('#product_details_close').click(function () {
                $('#layer_4').animate(
                    {
                        opacity: "0"
                    },
                    300,
                    function () {
                        var layer_4_styles =
                        {
                            display: "none",
                            opacity: "1"
                        };
                        $('#layer_4').css(layer_4_styles);
                        $('#layer_3').animate(
                            { opacity: "0" },
                            1000,
                            function () {
                                var layer_3_styles =
                                {
                                    display: "none",
                                    opacity: "0.3"
                                };
                                $('#layer_3').css(layer_3_styles);
                            }
                        );
                    }
                );
            });
        }
    </script>
</body>
</html>
