jQuery.fn.ajaxLoader = function (conf) { var config = jQuery.extend({ className: 'jquery-ajax-loader', fadeDuration: 500 }, conf); return this.each(function () { var t = jQuery(this); if (!this.ajaxLoaderObject) { var offset = t.offset(); var dim = { left: offset.left, top: offset.top, width: t.outerWidth(), height: t.outerHeight() }; this.ajaxLoaderObject = jQuery('<div class="' + config.className + '"></div>').css({ position: 'absolute', left: 0 + 'px', top: 0 + 'px', width: dim.width + 'px', height: dim.height + 'px', 'z-index': 1020 }).appendTo(t).hide() } this.ajaxLoaderObject.fadeIn(config.fadeDuration) }) }; jQuery.fn.ajaxLoaderRemove = function () { return this.each(function () { if (this.ajaxLoaderObject) { var tmp=this; this.ajaxLoaderObject.fadeOut(500, function () { tmp.ajaxLoaderObject.remove(); }); } }) };